[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Portfolio",
    "section": "",
    "text": "Take a look at some projects I have prepared.\n\n\n\n\n\n\n\n\n\n\n\n\nInvesteringssparkonto - is it worth it\n\n\n\ninteractive\n\n\ndashboard\n\n\nshiny\n\n\n\nAre you saving money by having an ISK?\n\n\n\nNils Kottmann\n\n\nInvalid Date\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe Swedish Real Estate market\n\n\n\ncode\n\n\nanalysis\n\n\nvisualization\n\n\n\nA look at the housing market in the Swedish metropolitan areas.\n\n\n\nNils Kottmann\n\n\nJul 2024\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTidy Tuesday 2024w6 - LGBTQIA+ Movies\n\n\n\napplied AI\n\n\nmentoring\n\n\n\nA look at the LGBTQIA+ movies with data from The Movie Database.\n\n\n\nNils Kottmann\n\n\nJan 2024\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "projects/tidy tuesday lgbtq movies.html",
    "href": "projects/tidy tuesday lgbtq movies.html",
    "title": "Tidy Tuesday 2024w6 - LGBTQIA+ Movies",
    "section": "",
    "text": "Show the code\nlibrary(tidyverse)\nlibrary(gt) # better tables\nlibrary(ggtext) # better titles and captions for graphs\nlibrary(pxweb) # grabbing data from SCB\nlibrary(cols4all) # better color choices with accessible palettes\n\n\nIn this\n\nGather data\n\n\nShow the code\ntuesdata &lt;- tidytuesdayR::tt_load(2024, week = 26)\n\n\n\n    Downloading file 1 of 1: `lgbtq_movies.csv`\n\n\nShow the code\nlgbtq_movies &lt;- tuesdata$lgbtq_movies\n\n\n# Genre Ids manual\ngenres &lt;- tibble(\n  genre = c(\"Action\", \"Adventure\", \"Animation\", \"Comedy\", \"Crime\", \"Documentary\", \"Drama\",\n            \"Family\", \"Fantasy\", \"History\", \"Horror\", \"Music\", \"Mystery\", \"Romance\",\n            \"Science Fiction\", \"TV Movie\", \"Thriller\", \"War\", \"Western\"),\n  genre_id = c(28, 12, 16, 35, 80, 99, 18, 10751, 14, 36, 27, 10402, 9648, 10749, 878, 10770, 53, 10752, 37)\n)\n\n\n\n\n\n\n\n\nAbout the data\n\n\n\nThe Movie Database (TMDB) is a community built movie and TV database. Every piece of data has been added by our amazing community dating back to 2008. TMDb’s strong international focus and breadth of data is largely unmatched and something we’re incredibly proud of. Put simply, we live and breathe community and that’s precisely what makes us different.\nThe data is pulled from the TMDB API using LGBT+ keywords, which then returned keywords used in the database. Most keywords were used for the final query, but a few were discarded due to not being relevant (e.g. - ‘gender differences’).\nThe keyword array is as follows: [‘lgbt’, ‘gay’, ‘lesbian’,‘transgender’,‘bisexual’,‘intersex’,‘queer’,‘genderqueer’,‘non-binary’,‘gender’, ‘asexual’]\n\n\n\n\nWhat\nWhere do the most popular LGBTQ+ movies come from? Are more LGBTQ+ movies being released over time?\n\n\nShow the code\nlgbtq_movies %&gt;%\n  group_by(original_language) %&gt;% \n  summarize(n = n()) %&gt;% \n  arrange(desc(n))\n\n\n# A tibble: 65 × 2\n   original_language     n\n   &lt;chr&gt;             &lt;int&gt;\n 1 en                 5001\n 2 es                  406\n 3 fr                  388\n 4 de                  205\n 5 pt                  181\n 6 ja                  135\n 7 it                  107\n 8 ko                   75\n 9 zh                   75\n10 tl                   70\n# ℹ 55 more rows"
  },
  {
    "objectID": "projects/ISK simulator.html",
    "href": "projects/ISK simulator.html",
    "title": "Investeringssparkonto - is it worth it",
    "section": "",
    "text": "In this project, I created a simple shiny app (you can find the code here) that compares the trade-offs between investing in an investeringssparkonto (ISK, a Swedish investment account that taxes wealth instead of capital gains) compared to a regular Depot account (that taxes 30% on capital gains).\n\n\n\ntry shinylive but manually put in the borrowing rates for now\n\nThe dashboard shinyapps.io\n\n\n\n\nhuggingface space\n\n\n\n\nHow\n\nCalculate the average value of the account for the year (average of the beginnign of Q1, Q2, Q3, Q4) (plus any investments during the quarter?)\nThe tax base for the ISK is determined by multiplying the average value by the government’s standard rate, which is calculated as the government borrowing rate plus 1%. For 2023, the standard rate is 3.03%.\n\nDet genomsnittliga värdet på ditt ISK under året multipliceras med statslåneräntan den 30 november året innan, plus 1 procentenhet.\n\nThe tax to be paid is 30% of the tax base.\n\n4.Determine the total return before tax, then subtract the tax paid to get the net return. Finally, calculate the annual return as a percentage of the initial value.\n\n\n\n\n\n\nAbout the data\n\n\n\nThe data here comes from SCB"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Nils Kottmann",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "projects/swedish real estate.html",
    "href": "projects/swedish real estate.html",
    "title": "The Swedish Real Estate market",
    "section": "",
    "text": "Show the code\nlibrary(tidyverse)\nlibrary(gt) # better tables\nlibrary(ggtext) # better titles and captions for graphs\nlibrary(pxweb) # grabbing data from SCB\nlibrary(cols4all) # better color choices with accessible palettes\n\n\nIn this post, I will take a look at the swedish real estate market.\nTrying to answer the question how worried should one be about the housing market?\n\nGather data\n\n\nShow the code\n# Sold tenant-owned flats by region, observations and year\n# d &lt;- pxweb_interactive(\"https://api.scb.se/OV0104/v1/doris/en/ssd/START/BO/BO0501/BO0501C/FastprisBRFRegionAr\")\n# PXWEB query \n\npxweb_query_list &lt;- \n  list(\n    \"Region\"=c(\"00\",\"0010\",\"0020\",\"0030\",\"0060\",\"01\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"12\",\"13\",\"14\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\"),\n    \"ContentsCode\"=c(\"BO0501R6\",\"BO0501R7\",\"BO0501R8\"),\n    \"Tid\"=c(\"2000\",\"2001\",\"2002\",\"2003\",\"2004\",\"2005\",\"2006\",\"2007\",\"2008\",\"2009\",\"2010\",\"2011\",\"2012\",\"2013\",\"2014\",\"2015\",\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"))\n\npx_data &lt;- \n  pxweb_get(\n    url = \"https://api.scb.se/OV0104/v1/doris/en/ssd/START/BO/BO0501/BO0501C/FastprisBRFRegionAr\",\n    query = pxweb_query_list)\n\nsales_region_tmp &lt;- as.data.frame(px_data, column.name.type = \"text\", variable.value.type = \"text\")\n\n# Price index (city & country) \n\n# Rent index (city)\n\n# Income Index (city)\n\n# Mortgage, Construction, GDP, Inflation (Country)\n\n\n\n\nShow the code\nsales_region &lt;- sales_region_tmp %&gt;% \n  rename(\n    n_sales = 'Number of',\n    mean_price_sek_k = 'Average price in SEK thousands',\n    median_price_sek_k = 'Median price in SEK thousands'\n    ) %&gt;% \n  mutate(year = as.numeric(year)) %&gt;% \n  group_by(region) %&gt;% \n  mutate(\n    sales_index = n_sales / n_sales[year == 2010] * 100,\n    mean_price_index = mean_price_sek_k / mean_price_sek_k[year == 2010] * 100,\n    median_price_index = median_price_sek_k / median_price_sek_k[year == 2010] * 100\n    ) %&gt;% \n  ungroup()\n\n\n\n\nShow the code\ndefault_theme &lt;-  theme_minimal() +\n  theme(\n    axis.text.y = element_text(size = 8),\n    legend.position = \"top\",\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    legend.title = element_blank(),\n    plot.title = element_textbox_simple(padding = margin(2, 2, 10, 0)),\n    plot.subtitle = element_textbox_simple(padding = margin(2, 2, 5.5, 0)),\n    plot.caption = element_text(hjust = 0, size = 10, face = \"italic\"),\n    panel.background = element_blank(),\n    plot.background = element_blank(),\n    plot.title.position = \"plot\",\n    plot.caption.position =  \"plot\"\n  )\n\n# Region colors \n\nnames &lt;- sales_region %&gt;% \n  filter(str_detect(region,\"Greater\")) %&gt;% \n  distinct(region) %&gt;% \n  unlist()\ncolors &lt;-  cols4all::c4a(palette = \"tol.medium\", n = length(names), type = \"cat\") \nregion_cols &lt;- setNames(colors, names)\n\nrm(names, colors)\n\n\n\n\n\n\n\n\nAbout the data\n\n\n\nThe data here comes from SCB\n\n\n\n\nAnalysis\nHow active is the housing market?\n\nTotal numbersIndex\n\n\n\n\nShow the code\nsales_region %&gt;% \n  filter(str_detect(region,\"Greater\")) %&gt;% \n  ggplot(aes(\n    x = year,\n    y = n_sales,\n    group = region,\n    color = region\n    ))+\n  geom_line(linewidth = 1)+\n  ggtitle(\"Number of sales \") +\n  scale_color_manual(values = region_cols) +\n  default_theme\n\n\n\n\n\n\n\n\n\n\n\n\n\nShow the code\nsales_region %&gt;% \n  filter(str_detect(region,\"Greater\")) %&gt;% \n  ggplot(aes(\n    x = year,\n    y = sales_index,\n    group = region,\n    color = region\n    ))+\n  geom_point(alpha = 0.5) +\n  geom_line(linewidth = 1)+\n  ggtitle(\"Indexed number of sales of tennant-owned flats\",\n          subtitle = \"Sales in 2010 = 100.\") +\n  labs(x = \"Year\", y = \"Sales index\")+\n  scale_color_manual(values = region_cols) +\n  default_theme\n\n\n\n\n\n\n\n\n\n\n\n\nActivity in the housing market peaked in all three metropolitan areas in 2021 with a sales index of relative to 2010 at 136 in Stockholm, which has since fallen to 98 in 2023.\n\n\nprice statistics\n\nMedian pricesIndex\n\n\n\n\nShow the code\nsales_region %&gt;% \n  filter(str_detect(region,\"Greater\")) %&gt;% \n  ggplot(aes(\n    x = year,\n    y = median_price_sek_k,\n    group = region,\n    color = region\n    ))+\n  geom_line(linewidth = 1)+\n  ggtitle(\"Median price of tenant-owned flats sold\") +\n  labs(x = \"Year\", y = \"Median price (in 1000 SEK)\")+\n  scale_color_manual(values = region_cols) +\n  default_theme\n\n\n\n\n\n\n\n\n\n\n\n\n\nShow the code\nsales_region %&gt;% \n  filter(str_detect(region,\"Greater\")) %&gt;% \n  ggplot(aes(\n    x = year,\n    y = median_price_index,\n    group = region,\n    color = region\n    ))+\n  geom_point(alpha = 0.5) +\n  geom_line(linewidth = 1)+\n  ggtitle(\"Indexed number of sales of tennant-owned flats\",\n          subtitle = \"Sales in 2010 = 100.\") +\n  labs(x = \"Year\", y = \"Median price index\")+\n  scale_color_manual(values = region_cols) +\n  default_theme\n\n\n\n\n\n\n\n\n\n\n\n\nMedian prices peaked in 2021 in Gothenburg and in 2022 in Malmö and Stockholm with prices roughly doubling since 2010.\nThe median price in Stockholm in 2023 was 3.3 million SEK.\n\n\nRecreating UBS bubble index\n\n\nShow the code\nsales_region %&gt;% filter(str_detect(region,\"Greater Stockh\"), year == 2023) %&gt;% select(median_price_sek_k)/1000 %&gt;% round(digits = 1)\n\n\n  median_price_sek_k\n1                3.3\n\n\nShow the code\nsales_region %&gt;% filter(str_detect(region,\"Greater Stockh\")) %&gt;% group_by(region) %&gt;%  mutate(max_prcie = max(median_price_index)) %&gt;% filter(max_prcie == median_price_index)\n\n\n# A tibble: 1 × 9\n# Groups:   region [1]\n  region            year n_sales mean_price_sek_k median_price_sek_k sales_index\n  &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;            &lt;dbl&gt;              &lt;dbl&gt;       &lt;dbl&gt;\n1 Greater Stockho…  2022   40113             4121               3350        113.\n# ℹ 3 more variables: mean_price_index &lt;dbl&gt;, median_price_index &lt;dbl&gt;,\n#   max_prcie &lt;dbl&gt;"
  }
]